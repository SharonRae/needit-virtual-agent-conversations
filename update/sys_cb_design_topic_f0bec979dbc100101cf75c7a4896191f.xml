<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__78bec9794cc10010935b74be020d911b">74bec979dbc100101cf75c7a4896191c</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"a88426b694774f3897e3ed1fb58be7bd","triggerType":"request","id":"a88426b694774f3897e3ed1fb58be7bd"}],"goals":[{"name":"primary","trigger_id":"a88426b694774f3897e3ed1fb58be7bd","nodes":[{"type":"StartGoal","goal_id":"a54f86bb5a324c919474167025511a86","greeting_msg":{"type":"String","mode":"string","value":"I can help you find and update NeedIt records for a type of request."},"id":"33771d272311421882ff72732c6d384d","name":"Start"},{"type":"TerminateGoal","goal_id":"a54f86bb5a324c919474167025511a86","confirmation_msg":{"type":"String","mode":"string","value":"Ask again when you need to update other NeedIt records."},"id":"4d71ec7bceb94e74b5b6dc06cffa3287","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"6e01ababc1534e35bcba3ea1a6c037c5","name":"NeedIt Type","goal_id":"a54f86bb5a324c919474167025511a86","variable_id":"3b6b98141cf14119878efc1904cce80e","message":{"type":"String","mode":"string","value":"What type of NeedIt record would you like to view?"},"optional":false},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // Return the display value (Label) for the needit_type choice\n\t    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n\t})()\n"},"id":"80bcf2d95e0e4275a9a87f676978f112","name":"Confirm NeedIt Type","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"1124e9e57af44871a23389ac4e1ecf1b","name":"NeedIt List","goal_id":"a54f86bb5a324c919474167025511a86","variable_id":"384efd74fea24d84a261537c776c5446","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view"},"optional":false,"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)\n","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number and short_description for the\n\t    // NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \": \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"384efd74fea24d84a261537c776c5446","fields":["priority","short_description","u_when_needed"],"id":"b2e1dc9546e248259637868174803628","name":"NeedIt Card","goal_id":"a54f86bb5a324c919474167025511a86","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"InputPrompt","variable_id":"57ae1be42a714a7496e9401a71e6a79d","message":{"type":"String","mode":"string","value":"Would you like to view another NeedIt Record?"},"optional":false,"id":"fab94fb6440f43e098c4d8ab1d16be14","name":"Search Again","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again="},"id":"ac2cd77762444d908f90e5879c1b704b","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"17f72203b18e41bb956b26051531200d","name":"Yes"}],"id":"aec3b12fde8d41b6bbe1b8425937fdc8","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"InputPrompt","variable_id":"04b520d59ea04cb6ac9ea61b23615ffa","message":{"type":"String","mode":"string","value":"When do you need the NeedIt completed?"},"optional":false,"id":"957c04bf9a0d49929817e83ef13e309e","name":"New When Needed Date","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"384efd74fea24d84a261537c776c5446","id":"11e6106cacba4c249b3ac899d9095765","name":"Change When Needed Date","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"384efd74fea24d84a261537c776c5446","fields":["priority","short_description","u_when_needed"],"id":"adcd9faf2869457ea90bfb478d15da63","name":"Updated NeedIt","goal_id":"a54f86bb5a324c919474167025511a86","condition":{"type":"Condition","mode":"variable","value":""}},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"0c15ebe03a634a238a0285f4d9805b76","name":"What to update","goal_id":"a54f86bb5a324c919474167025511a86","variable_id":"12a48b71b5dd4b23bfe44aaaeeca59fb","message":{"type":"String","mode":"string","value":"Choose a field to update"},"optional":false},{"type":"Decision","name":"Update Field","branches":[{"type":"Branch","label":"When Needed","expression":{"type":"Applicability","mode":"query","value":"what_to_update=when"},"id":"9353dbec3d0941dd8f57fd36d578103a","name":"When Needed"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"what_to_update=nothing"},"id":"4f07954af75447a79cdff70bb50845ee","name":"Nothing"},{"type":"Branch","label":"Short Description","expression":{"type":"Applicability","mode":"query","value":"what_to_update=description"},"id":"f9ef78628a9542d2b490fd7d697b82ad","name":"Short Description"}],"id":"f9ba4c2b051e4a7d9899dc4ced001438","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"InputPrompt","variable_id":"8961fafd84724266958ffac0e609ee74","message":{"type":"String","mode":"string","value":"Enter a new description."},"optional":false,"id":"92e6fc9497924ad2bce592b803ebb8a8","name":"New Short Description","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"384efd74fea24d84a261537c776c5446","id":"e4f70b28e64c405f8d11c27154fa42b1","name":"Change Short Description","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"Decision","name":"Search_count Value","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()"},"id":"cef3bb804b554e1eb7d0d6d7a22a1edb","name":"Less than 3"},{"type":"Branch","label":"3 or more","expression":{"type":"Applicability","mode":"query","value":""},"id":"4458b931f5754098a19352402bf61290","name":"3 or more"}],"id":"fda4e5ad9f21478586d4bb55ad57fb33","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t})()","id":"c148ad42a8544d009e13d8e0034c61d2","name":"Update search_count","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"InputPrompt","variable_id":"d426cc23ca6c4c90a141093e755a9f4c","message":{"type":"String","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, inform users they will be transfered to a live agent\n\t    // otherwise, let them know how to work with more NeedIt records\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return 'You have reached your NeedIt search quota. I will transfer you to a live agent for assistance.'\n\t    } else {\n\t        return 'You have reached your NeedIt search quota. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n\t    }\n\t})()\n"},"optional":false,"id":"81f5a76d98e64945827e0c2fb994c93d","name":"Quota Reached","goal_id":"a54f86bb5a324c919474167025511a86"},{"type":"ScriptOutputPrompt","output_type":"single_part","id":"f850f96907f04d91b611b680bc592378","name":"Transfer to Agent","goal_id":"a54f86bb5a324c919474167025511a86","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, return true\n\t    // otherwise, return false\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return true;\n\t    } else {\n\t        return false;\n\t    }\n\t})()"},"value":{"type":"String","mode":"string","value":"(function execute() {\n\t    // Transfer to a live agent\n\t    vaSystem.connectToAgent()\n\t})()\n"}}],"edges":[{"type":"Edge","source_node_id":"fda4e5ad9f21478586d4bb55ad57fb33","target_node_id":"6e01ababc1534e35bcba3ea1a6c037c5","branch_id":"cef3bb804b554e1eb7d0d6d7a22a1edb","id":"fd4aa97d627c46a18ed407371fb8a397","name":"cef3bb804b554e1eb7d0d6d7a22a1edb"},{"type":"Edge","source_node_id":"33771d272311421882ff72732c6d384d","target_node_id":"6e01ababc1534e35bcba3ea1a6c037c5","id":"488f83e05b0840259502db45dacf7f9e"},{"type":"Edge","source_node_id":"6e01ababc1534e35bcba3ea1a6c037c5","target_node_id":"80bcf2d95e0e4275a9a87f676978f112","id":"6d13cc88cbf346cfb552b7c72d7ff586"},{"type":"Edge","source_node_id":"80bcf2d95e0e4275a9a87f676978f112","target_node_id":"1124e9e57af44871a23389ac4e1ecf1b","id":"17cae2c232964f6dbbd29895135086aa"},{"type":"Edge","source_node_id":"1124e9e57af44871a23389ac4e1ecf1b","target_node_id":"b2e1dc9546e248259637868174803628","id":"08969ec9019f4c5292a08bc99fa097f8"},{"type":"Edge","source_node_id":"fab94fb6440f43e098c4d8ab1d16be14","target_node_id":"aec3b12fde8d41b6bbe1b8425937fdc8","id":"896e1644bd574a84bcaa9602c6afbc20"},{"type":"Edge","source_node_id":"aec3b12fde8d41b6bbe1b8425937fdc8","target_node_id":"4d71ec7bceb94e74b5b6dc06cffa3287","branch_id":"ac2cd77762444d908f90e5879c1b704b","id":"5831535e5b354ff38328e9bd53b5bd5e","name":"ac2cd77762444d908f90e5879c1b704b"},{"type":"Edge","source_node_id":"957c04bf9a0d49929817e83ef13e309e","target_node_id":"11e6106cacba4c249b3ac899d9095765","id":"194c9124ce6346f5a40c7f0a6adf21aa"},{"type":"Edge","source_node_id":"11e6106cacba4c249b3ac899d9095765","target_node_id":"adcd9faf2869457ea90bfb478d15da63","id":"72e32e33de894ebc86ca6bb2ce033ae4"},{"type":"Edge","source_node_id":"adcd9faf2869457ea90bfb478d15da63","target_node_id":"fab94fb6440f43e098c4d8ab1d16be14","id":"afeb6c388f7c491480b501b5abbf431e"},{"type":"Edge","source_node_id":"b2e1dc9546e248259637868174803628","target_node_id":"0c15ebe03a634a238a0285f4d9805b76","id":"6322a6ecf7d14fbea13c6b9d1f3d1e81"},{"type":"Edge","source_node_id":"0c15ebe03a634a238a0285f4d9805b76","target_node_id":"f9ba4c2b051e4a7d9899dc4ced001438","id":"4fdfa7eed92d4e4fb9cd76058da74f1a"},{"type":"Edge","source_node_id":"f9ba4c2b051e4a7d9899dc4ced001438","target_node_id":"957c04bf9a0d49929817e83ef13e309e","branch_id":"9353dbec3d0941dd8f57fd36d578103a","id":"23ee66f3e1e64f3899cbd3089acc3cff","name":"9353dbec3d0941dd8f57fd36d578103a"},{"type":"Edge","source_node_id":"f9ba4c2b051e4a7d9899dc4ced001438","target_node_id":"fab94fb6440f43e098c4d8ab1d16be14","branch_id":"4f07954af75447a79cdff70bb50845ee","id":"f83c893f431d4d95b59c19a91e82a7ba","name":"4f07954af75447a79cdff70bb50845ee"},{"type":"Edge","source_node_id":"f9ba4c2b051e4a7d9899dc4ced001438","target_node_id":"92e6fc9497924ad2bce592b803ebb8a8","branch_id":"f9ef78628a9542d2b490fd7d697b82ad","id":"0a67fda83b14444ea03f8b427b50be94","name":"f9ef78628a9542d2b490fd7d697b82ad"},{"type":"Edge","source_node_id":"92e6fc9497924ad2bce592b803ebb8a8","target_node_id":"e4f70b28e64c405f8d11c27154fa42b1","id":"357bbca40aed4cf59d337610a066429d"},{"type":"Edge","source_node_id":"e4f70b28e64c405f8d11c27154fa42b1","target_node_id":"adcd9faf2869457ea90bfb478d15da63","id":"42028c4c28f14f75acd365c7a6019c6e"},{"type":"Edge","source_node_id":"aec3b12fde8d41b6bbe1b8425937fdc8","target_node_id":"c148ad42a8544d009e13d8e0034c61d2","branch_id":"17f72203b18e41bb956b26051531200d","id":"763746b23f7c41da95a5fe718c10063d","name":"17f72203b18e41bb956b26051531200d"},{"type":"Edge","source_node_id":"c148ad42a8544d009e13d8e0034c61d2","target_node_id":"fda4e5ad9f21478586d4bb55ad57fb33","id":"3a80180841bc4f9cbbab7ae6f244e86f"},{"type":"Edge","source_node_id":"fda4e5ad9f21478586d4bb55ad57fb33","target_node_id":"81f5a76d98e64945827e0c2fb994c93d","branch_id":"4458b931f5754098a19352402bf61290","id":"7148d0ab2319479a86b696b7f8f7d7c0","name":"4458b931f5754098a19352402bf61290"},{"type":"Edge","source_node_id":"81f5a76d98e64945827e0c2fb994c93d","target_node_id":"f850f96907f04d91b611b680bc592378","id":"345d841dacc94c3eb93b8c62a1acc7d0"},{"type":"Edge","source_node_id":"f850f96907f04d91b611b680bc592378","target_node_id":"4d71ec7bceb94e74b5b6dc06cffa3287","id":"bdc4e4589e614ee5bcace148c1c3028d"}],"id":"a54f86bb5a324c919474167025511a86"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"6334f282afc641ae85ebdd821f364738"}],"glide_variables":[{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"3b6b98141cf14119878efc1904cce80e","name":"needit_type"},{"type":"Reference","table":"x_58872_needit_needit","id":"384efd74fea24d84a261537c776c5446","name":"needit_list"},{"type":"True/False","id":"57ae1be42a714a7496e9401a71e6a79d","name":"search_again"},{"type":"Date/Time","mode":"date","id":"04b520d59ea04cb6ac9ea61b23615ffa","name":"new_when_needed_date"},{"type":"Reference","table":"","id":"ce2a660b5db54d629d57357f6a8b1f04","name":"change_when_needed_date"},{"type":"Choice","choices":[{"name":"Short Description","element":"description"},{"name":"When Needed","element":"when"},{"name":"Nothing","element":"nothing"}],"id":"12a48b71b5dd4b23bfe44aaaeeca59fb","name":"what_to_update"},{"type":"String","name":"new_short_description","id":"8961fafd84724266958ffac0e609ee74"},{"type":"Reference","table":"","id":"25ff498ce9fd44749d2945cca192a7da","name":"change_short_description"},{"type":"String","name":"quota_reached","id":"d426cc23ca6c4c90a141093e755a9f4c"},{"type":"Reference","table":"sys_user","id":"current-user","name":"user"}],"roles":[],"scope":"9d6e05ffdb3000101cf75c7a48961950","id":"02ff4dbbdb7000101cf75c7a48961918","name":"_PRVW__78bec9794cc10010935b74be020d911b","key_phrases":["Update NeedIt Records","update","NeedIt Request"]}</design_definition>
        <design_topic_id>02ff4dbbdb7000101cf75c7a48961918</design_topic_id>
        <name>_PRVW__78bec9794cc10010935b74be020d911b</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-11-11 20:14:27</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>f0bec979dbc100101cf75c7a4896191f</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_213916_needit_vi">9d6e05ffdb3000101cf75c7a48961950</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">9d6e05ffdb3000101cf75c7a48961950</sys_scope>
        <sys_update_name>sys_cb_design_topic_f0bec979dbc100101cf75c7a4896191f</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-11-11 20:14:27</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
